<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:f="http://xmlns.jcp.org/jsf/core">

    <div id="ser" class="modalDialog">
        <div>
            <a href="#close" title="Close" class="close">X</a>
            <div class="center-align">
                <h5 class="text-grey">Ser Guardião</h5>

                <br/>

                <h:form id="gform">
                    <div class="inline">
                        <div class="upload-button">
                            <img class="profile-pic" id="picPersonB" src="#{personBean.profilePic}"/>
                            <h:inputHidden id="pic" value="#{personBean.profilePic}"/>
                        </div>
                    </div>
                    <p class="grey-text center-align"
                       style="font-size: 12px">Clique na imagem para inserir uma foto sua</p>

                    <h:outputText style="font-size: .8rem; color: #9e9e9e;" value="Data de Nascimento"/>
                    <div class="inline">
                        <i class="icons text-grey material-icons"> date_range</i>
                        <p:calendar id="data" value="#{personBean.currentPerson.birthDate}"
                                    pattern="dd/MM/yyyy"
                                    class="center-align"
                                    locale="pt_BR"
                                    required="true" requiredMessage="Por favor preencha o campo Data de Nascimento"
                                    a:placeholder="Data de nascimento">
                        </p:calendar>
                    </div>

                    <h:outputText style="font-size: .8rem; color: #9e9e9e;" value="Rua"/>
                    <div class="inline">
                        <i class="icons text-grey material-icons">location_on</i>
                        <p:inputText value="#{personBean.currentPerson.street}" id="street" class="center-align"
                                     required="true" requiredMessage="Por favor preencha o campo Endereço"
                                     validatorMessage="O campo Endereço deve conter no minímo 4 caracteres"
                                     a:placeholder="Rua">
                            <f:validateLength minimum="3"/>
                        </p:inputText>
                    </div>

                    <h:outputText style="font-size: .8rem; color: #9e9e9e; margin-right: 10%;" value="Complemento"/>
                    <h:outputText style="font-size: .8rem; color: #9e9e9e; margin-left: 10%;" value="Número"/>
                    <div class="inline">
                        <i class="icons text-grey material-icons">location_on</i>
                        <p:inputText value="#{personBean.currentPerson.complement}" id="complement" class="center-align"
                                     a:placeholder="Complemento"/>

                        <i class="icons text-grey material-icons">location_on</i>
                        <p:inputText value="#{personBean.currentPerson.addressNumber}" id="addressNumber"
                                     a:type="number" class="center-align" required="true"
                                     requiredMessage="Por favor preencha o campo Número" a:placeholder="Número">
                        </p:inputText>
                    </div>

                    <h:outputText style="font-size: .8rem; color: #9e9e9e;" value="Sexo"/>
                    <div class="inline">
                        <p:selectOneRadio id="console" value="#{personBean.personType}">
                            <f:selectItem itemLabel="Masculino" itemValue="0"/>
                            <f:selectItem itemLabel="Feminino" itemValue="1"/>
                        </p:selectOneRadio>
                    </div>

                    <h:outputText style="font-size: .8rem; color: #9e9e9e;" value="Celular/WhatsApp"/>
                    <div class="inline">
                        <i class="icons text-grey material-icons">phone</i>
                        <p:inputText value="#{personBean.currentPerson.cellPhone}" id="tel" a:type="number"
                                     class="center-align" required="true"
                                     requiredMessage="Por favor preencha o campo Celular/WhatsApp"
                                     a:placeholder="Celular/WhatsApp">
                        </p:inputText>
                    </div>

                    <div class="inline">
                        <a type="button" onclick="getInfo()"
                           class="waves-effect waves-light btn deep-orange lighten-1">Compartilhar Geolocalização</a>
                    </div>
                    <p class="grey-text center-align"
                       style="font-size: 12px">Compartilhe sua geolocalização para que possamos localizar pessoas perto de você</p>

                    <div class="inline" id="location">
                        <img width="32" height="32" src="assets/images/latitude.png"/>
                        <p:inputText id="latitude" value="#{personBean.currentPerson.latitude}" class="center-align"
                                     required="true" requiredMessage="Por favor compartilhe sua Latitude"
                                     a:placeholder="Latitude" a:name="latitude">
                        </p:inputText>
                        <img width="32" height="32" src="assets/images/longitude.png"/>
                        <p:inputText id="longitude" value="#{personBean.currentPerson.longitude}" class="center-align"
                                     required="true" requiredMessage="Por favor compartilhe sua Longitude"
                                     a:placeholder="Longitude" a:name="longitude">
                        </p:inputText>
                    </div>

                    <h:outputText style="font-size: .8rem; color: #9e9e9e;" value="Mensagem Sobre Você"/>
                    <div class="inline" id="message">
                        <p:inputTextarea value="#{personBean.currentPerson.message}" id="mensagem"
                                         class="center-align"
                                         a:placeholder="Digite uma Mensagem"/>
                    </div>

                    <h:messages id="register" style="color: red"/>

                    <div class="center-align">
                        <p:commandButton update="@form" value="Finalizar Cadastro"
                                         action="#{personBean.updateServiceProvider()}" ajax="true"
                                         class="waves-effect waves-light btn deep-orange lighten-1 button"/>
                    </div>
                </h:form>
            </div>
        </div>
    </div>
    <!--@formatter:off-->
    <script>
        if (document.querySelector('#picPersonB').src === "") {
            document.querySelector('#picPersonB').src = "./assets/images/img.jpg";
        }
        getInfo = () => {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(ShowPosition);
            } else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        };
        ShowPosition = (position) => {
            let latitude = position.coords.latitude.toFixed(3);
            let longitude = position.coords.longitude.toFixed(3);
            console.log('aaaaaaaaaa', latitude, longitude);
            document.getElementById("gform:latitude").value = latitude;
            document.getElementById("gform:longitude").value = longitude;
        };
    </script>
<!--@formatter:on-->
</ui:composition>